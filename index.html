<script>
  const sentences = [
    "Turkey's national bird is the Redwing. They really winged it.",
    "If you're scared of escalators, there are steps you can take.",
    "I got some powdered water. I didn't know what to add.",
    "My IQ test results came back. They were negative."
    // Add more here
  ];

  const IMAGE_COUNT = 3;        // how many images you have
  const IMAGE_PREFIX = "img";   // filename prefix
  const IMAGE_EXT = ".jpg";     // extension
  const IMAGE_PATH = "images/";

  const images = Array.from({ length: IMAGE_COUNT }, (_, i) => {
    const num = String(i + 1).padStart(2, "0");
    return `${IMAGE_PATH}${IMAGE_PREFIX}${num}${IMAGE_EXT}`;
  });

  function getLastIndex(key) {
    const raw = localStorage.getItem(key);
    const n = Number(raw);
    return Number.isInteger(n) ? n : -1;
  }

  function setLastIndex(key, index) {
    localStorage.setItem(key, String(index));
  }

  function randomIndex(length, lastIndex) {
    if (length <= 1) return 0;

    let i = Math.floor(Math.random() * length);
    while (i === lastIndex) {
      i = Math.floor(Math.random() * length);
    }
    return i;
  }

  function fadeIn(el) {
    el.classList.remove("show");
    void el.offsetWidth; // restart transition
    requestAnimationFrame(() => el.classList.add("show"));
  }

  function showRandom() {
    const lastSentenceIndex = getLastIndex("lastSentenceIndex");
    const lastImageIndex = getLastIndex("lastImageIndex");

    const sIndex = randomIndex(sentences.length, lastSentenceIndex);
    const iIndex = randomIndex(images.length, lastImageIndex);

    setLastIndex("lastSentenceIndex", sIndex);
    setLastIndex("lastImageIndex", iIndex);

    const sentenceEl = document.getElementById("sentence");
    const imgEl = document.getElementById("pic");

    sentenceEl.textContent = sentences[sIndex];
    fadeIn(sentenceEl);

    imgEl.classList.remove("show");
    imgEl.onload = () => fadeIn(imgEl);
    imgEl.onerror = () => fadeIn(imgEl);

    imgEl.src = images[iIndex];
    imgEl.alt = "Random image";
  }

  document.getElementById("again").addEventListener("click", showRandom);

  // Ensure fade starts hidden, then shows
  document.getElementById("sentence").classList.add("fade");
  document.getElementById("pic").classList.add("fade");

  showRandom();
</script>
